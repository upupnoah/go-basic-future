# 生成私钥(key) 与 自签名证书(pem) 的步骤

生成 `server.pem`（证书文件）和 `server.key`（私钥文件）通常使用OpenSSL，这是一个强大的安全套接字层（SSL）和传输层安全（TLS）协议的工具集。下面是在命令行中生成这些文件的步骤：

## 步骤 1：生成私钥 (server.key)
打开你的命令行工具。
- 运行以下命令来生成一个新的私钥：
`openssl genrsa -out server.key 2048`
> 这条命令会生成一个2048位的RSA私钥，并保存到名为 server.key 的文件中
> 
## 步骤 2：生成证书签名请求 (CSR)
证书签名请求（CSR）是你提供给证书颁发机构（CA）的请求，但是在这里，我们会自签名我们的证书，所以实际上不会将CSR发送给CA。

- 使用刚刚创建的私钥生成CSR：
`openssl req -new -key server.key -out server.csr`
> 你需要回答一系列问题，比如你的国家代码、组织名称等。这些信息用于证书的标识，因为我们正在创建一个自签名证书，所以这些信息并不特别重要。

## 步骤 3：生成自签名证书 (server.pem)
最后一步是使用你的CSR和私钥生成一个自签名的证书。自签名证书意味着你自己是CA，这对于测试和开发环境是可以的，但不推荐用于生产。

- 运行以下命令来生成证书：
`openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.pem`
> days 365 表示这个证书会在365天后过期，你可以根据需要设置不同的值。
这条命令会生成一个名为 server.pem 的证书文件。
完成这些步骤后，你将得到 server.key（你的私钥）和 server.pem（你的证书）。你可以在Gin应用程序中使用这些文件来启动HTTPS服务器。请注意，因为这是一个自签名的证书，浏览器会警告这个证书不是由受信任的CA签发的。对于生产环境，你应该从受信任的CA购买证书。


## Note
- `2024/02/03 23:43:36 http: TLS handshake error from 127.0.0.1:53296: EOF`: 使用的是自签名证书，客户端（如浏览器）可能不信任该证书，并且可能在用户未明确接受风险前终止连接